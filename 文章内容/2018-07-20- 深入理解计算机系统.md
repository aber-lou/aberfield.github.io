---
layout: mypost
title: 深入理解计算机系统
---


# 第一章 计算机系统漫游

+ 所有的计算机系统都有相似的硬件和软件组件，它们又执行着相似的功能。本书主要是为了深入了解软件组件如何工作，以及这些组件是如何影响程序的正确性和性能的。

+ 程序被其他程序翻译成不同的格式
  1. 预处理阶段
  1. 编译阶段
  1. 汇编阶段
  1. 链接阶段

+ 了解编译系统如何工作是大有益处的
  1. 优化程序性能。比如一个switch语句是否比一系列的if-else高效？一个函数调用的开销有多大？while循环比for循环更有效吗？
  2. 理解链接时出现的错误。一些令人困扰的程序错误往往出现在连接器的操作上，了解学习可以更快的找到问题所在。比如一些常用的知识点可以理解到。静态变量和全局变量的区别是什么？静态库和动态库的区别是什么。
  3. 避免安全漏洞。缓冲区溢出错误是造成大多数网络和Internet服务器安全漏洞的主要原因。

+ 处理器读并解释存在内存中的指令。

+ 系统的硬件组成。
  1. 总线：贯穿整个系统的一组电子管道。
  2. I/O 设备：设备和系统与外部世界的联系管道。
  3. 主存: 一个临时的存储设备，在处理器执行程序时，用来存放程序和程序上面的数据。从物理上说注册时由一组动态随机存储器芯片组成。逻辑上是一个线性的字节数组。
  4. 处理器: 是解释存储在主存中指令的引擎。
    1. 加载：从主存复制一个字节到寄存器。
    2. 存储：从寄存器复制一个字节到主存的某个位置。
    3. 操作：将两个寄存器的内存复制到ALU，ALU对两个字做算术运算。并将结果放到一个寄存器中。
    4. 跳转：从指令中抽取一个字，并将这个字复制到程序计数器中。


+ 高速缓存至关重要，系统花费大量时间把信息从一个地方移动到另外一个地方。所以程序设计者主要目标是使得这些复制操作尽可能的完成。

+ 进程：是操作系统对一个正在运行的程序的一种抽象。而多个进程同时占用硬件是叫做并发运行。

+ 线程：现代系统中，一个进程实际上可以由多个成为线程的执行单元组成，每个线程运行在进程的上下文中，并共享同样的代码和全局数据。


+ 虚拟内存：是一个抽象概念，它为每个进程提供了一个假象，即每个进程都在独占使用主存，每个进程看到的内存都是一致的，成为虚拟地址空间。

+ 虚拟地址空间是由大量确定定义的区构成，每个区都有专门的功能，从最低的地址开始依次为：
  1. 程序代码和数据：是直接按照可执行目标文件的内内容初始化的。
  2. 堆：运行时堆
  3. 共享库
  4. 栈：运行时创建的虚拟地址空间顶部的是用户栈，编译器用它来实现函数调用。
  5. 内核虚拟内存：内核保留，不允许应用程序读写这个区域的内容或者直接调用内核函数定义的函数，必须调用内核来执行这些操作。

+ 文件是字节序列。

+ 系统之间利用网络通信。将信息从一台主机复制到另一台主机已经成为计算机系统最重要的用途。

+ 并发和并行
  1. 线程级并发
  2. 指令级并行
  3. 单指令，多数据并行

  + 抽象
    1. 文件是对I/O到设备的抽象
    2. 虚拟内存是对程序存储器的抽象
    3. 进程则是对一个正在运行的程序的抽象
    4. 虚拟机是对整个计算机的抽象

+ 子数据大小.

+ 寻址和字节顺序
  1. 小端法：最低有效字节在最前面的方式
  2. 大端法：最高有效字节在最前面的方式
  3. iOS和Android只能运行小端模式


+ 立个Flag，这本书在一个月内读完第一遍，了解大概。

> 引用自 【深入理解计算机系统】。
